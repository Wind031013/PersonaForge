# PersonaForge

<div align="center">

![Python](https://img.shields.io/badge/Python-3.12+-blue.svg)
![LangChain](https://img.shields.io/badge/LangChain-orange.svg)
![RAG](https://img.shields.io/badge/RAG-purple.svg)
![License](https://img.shields.io/badge/License-MIT-green.svg)

**è§’è‰²æ‰®æ¼”æ¨¡å‹æ„å»ºæµæ°´çº¿ - ä»æ–‡æœ¬åˆ°æ™ºèƒ½è§’è‰²**

[åŠŸèƒ½ç‰¹è‰²](#-åŠŸèƒ½ç‰¹è‰²) â€¢ [æŠ€æœ¯æ ˆ](#-æŠ€æœ¯æ ˆ) â€¢ [å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹) â€¢ [ä½¿ç”¨ç¤ºä¾‹](#-ä½¿ç”¨ç¤ºä¾‹) â€¢ [é¡¹ç›®ç»“æ„](#-é¡¹ç›®ç»“æ„)

</div>

---

## ğŸ“– é¡¹ç›®ç®€ä»‹

PersonaForge æ˜¯ä¸€ä¸ªå…¨è‡ªåŠ¨çš„è§’è‰²æ‰®æ¼”æ¨¡å‹æ„å»ºæµæ°´çº¿ï¼Œèƒ½å¤Ÿä»ä»»æ„å°è¯´ã€å‰§æœ¬æˆ–æ–‡æœ¬ä¸­æå–è§’è‰²ç‰¹å¾ï¼Œæ„å»ºé«˜è´¨é‡çš„å¯¹è¯æ•°æ®é›†å’ŒRAGçŸ¥è¯†åº“ã€‚é€šè¿‡å¤šAgentåä½œç³»ç»Ÿï¼Œä¸ä»…å¯ä»¥ç”Ÿæˆé€‚åˆæ¨¡å‹å¾®è°ƒçš„å¯¹è¯æ•°æ®ï¼Œè¿˜èƒ½åˆ›å»ºè§’è‰²çš„é•¿æœŸè®°å¿†ç³»ç»Ÿï¼Œè®©AIçœŸæ­£å­¦ä¼š"æˆä¸º"é‚£ä¸ªè§’è‰²ã€‚

### ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

- **å®Œæ•´æµæ°´çº¿**ï¼šä»æ–‡æœ¬çˆ¬å–åˆ°æ¨¡å‹å¾®è°ƒçš„ä¸€ç«™å¼è§£å†³æ–¹æ¡ˆ
- **æ™ºèƒ½ç‰¹å¾æå–**ï¼šæ·±åº¦åˆ†æè§’è‰²æ€§æ ¼ã€è¯­è¨€ä¹ æƒ¯å’Œè¯´è¯é£æ ¼
- **RAGçŸ¥è¯†åº“**ï¼šæ„å»ºè§’è‰²çš„è®°å¿†ç³»ç»Ÿï¼Œå®ç°ä¸€è‡´çš„è§’è‰²æ‰®æ¼”
- **é«˜è´¨é‡æ•°æ®**ï¼šç”Ÿæˆé€‚åˆå¾®è°ƒçš„å¯¹è¯å¯¹ï¼Œæå‡æ¨¡å‹è§’è‰²æ‰®æ¼”èƒ½åŠ›

### ğŸ¯ è§£å†³çš„æ ¸å¿ƒé—®é¢˜

- **æ•°æ®ç¨€ç¼º**ï¼šç¼ºä¹å…·æœ‰é²œæ˜è§’è‰²ç‰¹å¾çš„é«˜è´¨é‡å¯¹è¯è®­ç»ƒæ•°æ®
- **æˆæœ¬é«˜æ˜‚**ï¼šäººå·¥æ ‡æ³¨å’Œç­›é€‰å¯¹è¯æ•°æ®è´¹æ—¶è´¹åŠ›
- **è´¨é‡å‚å·®**ï¼šåŸå§‹æ–‡æœ¬ä¸­æ··å…¥å¤§é‡æ— å…³å†…å®¹å’Œä½è´¨é‡å¯¹è¯
- **è§’è‰²ä¸€è‡´æ€§**ï¼šç°æœ‰æ¨¡å‹éš¾ä»¥ç»´æŒé•¿æœŸç¨³å®šçš„è§’è‰²ç‰¹å¾
- **ç¼ºä¹æ·±åº¦**ï¼šç®€å•çš„å¯¹è¯æ¨¡ä»¿æ— æ³•ä½“ç°è§’è‰²æ·±å±‚æ€§æ ¼

---

## âœ¨ åŠŸèƒ½ç‰¹è‰²

### ğŸ” æ™ºèƒ½çˆ¬å–ç³»ç»Ÿ
- ğŸ“– æ”¯æŒå¤šç§å°è¯´æºç½‘ç«™
- ğŸ”„ å¸¦é‡è¯•æœºåˆ¶çš„å¥å£®ç½‘ç»œè¯·æ±‚
- â±ï¸ æ™ºèƒ½é™é€Ÿï¼Œå°Šé‡ç›®æ ‡ç½‘ç«™
- ğŸ“ æ™ºèƒ½æ–‡æœ¬æ¸…ç†ï¼Œå»é™¤å¹¿å‘Šå’Œæ— å…³å†…å®¹

### ğŸ¤– å¤šAgentåä½œæµæ°´çº¿
#### 1. å¯¹è¯æå–Agent
- ğŸ¯ åŸºäºå…ˆè¿›LLMæ¨¡å‹ï¼ˆGLM-4.5-Airç­‰ï¼‰
- ğŸ·ï¸ æ™ºèƒ½è¯†åˆ«è§’è‰²åŠå…¶æ‰€æœ‰åˆ«å
- âœ¨ ç²¾ç¡®æå–å¯¹è¯åŸæ–‡ï¼Œè‡ªåŠ¨æ’é™¤æ—ç™½å’Œæè¿°

#### 2. ç‰¹å¾ç­›é€‰Agent
- ğŸ­ å¤šç»´åº¦æ€§æ ¼åˆ†æï¼ˆå¯è‡ªå®šä¹‰ç»´åº¦ï¼‰
- ğŸ” è¯†åˆ«è§’è‰²æ ‡å¿—æ€§è¯­è¨€ä¹ æƒ¯å’Œå£ç™–
- ğŸ“Š åŸºäºè§’è‰²çš„æ€§æ ¼ç‰¹å¾è¯„åˆ†ç³»ç»Ÿ
- ğŸ¯ ç­›é€‰æœ€å…·ä»£è¡¨æ€§çš„é«˜è´¨é‡å¯¹è¯

#### 3. å¯¹è¯é‡æ„Agent
- ğŸª æ¯å¥å°è¯ç”Ÿæˆå¤šä¸ªå¯¹è¯åœºæ™¯
- ğŸ’¬ æ„å»º (Scene, Input, Output) å®Œæ•´ç»“æ„
- ğŸš€ å¼‚æ­¥æ‰¹é‡å¤„ç†ï¼Œæ”¯æŒé«˜å¹¶å‘
- ğŸ¨ ä¿æŒè§’è‰²è¯­è¨€é£æ ¼çš„ä¸€è‡´æ€§

#### 4. RAGçŸ¥è¯†åº“æ„å»ºAgent
- ğŸ§  æ„å»ºè§’è‰²èƒŒæ™¯æ•…äº‹çŸ¥è¯†åº“
- ğŸ“š æå–å…³é”®äº‹ä»¶å’Œå…³ç³»
- ğŸ”— å»ºç«‹çŸ¥è¯†å›¾è°±ï¼Œæ”¯æŒè§’è‰²æ¨ç†
- ğŸ’¾ ç”Ÿæˆå‘é‡æ•°æ®åº“ï¼Œæ”¯æŒé•¿æœŸè®°å¿†

---

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

| ç±»åˆ« | æŠ€æœ¯é€‰å‹ | è¯´æ˜ |
|------|----------|------|
| **è¯­è¨€** | Python 3.12+ | ç°ä»£ Python ç‰ˆæœ¬ï¼Œæ€§èƒ½ä¼˜å¼‚ |
| **LLM æ¡†æ¶** | LangChain | å¤§è¯­è¨€æ¨¡å‹åº”ç”¨å¼€å‘æ¡†æ¶ |
| **AI æ¨¡å‹** | æ™ºè°± AI GLM-4.5-Air / OpenAI GPT | æ”¯æŒå¤šç§LLMæ¨¡å‹ï¼Œçµæ´»é…ç½® |
| **RAG æ¡†æ¶** | LangChain + ChromaDB / FAISS | å‘é‡æ•°æ®åº“å’Œæ£€ç´¢å¢å¼ºç”Ÿæˆ |
| **æ•°æ®éªŒè¯** | Pydantic | ç±»å‹å®‰å…¨çš„æ•°æ®éªŒè¯å’Œåºåˆ—åŒ– |
| **HTTP å®¢æˆ·ç«¯** | requests + httpx | å¥å£®çš„ç½‘ç»œè¯·æ±‚æ”¯æŒ |
| **HTML è§£æ** | BeautifulSoup4 + lxml | é«˜æ•ˆçš„ç½‘é¡µå†…å®¹è§£æ |
| **å¼‚æ­¥å¤„ç†** | asyncio + aiofiles | é«˜æ€§èƒ½å¼‚æ­¥æ–‡ä»¶æ“ä½œ |
| **é‡è¯•æœºåˆ¶** | tenacity | ä¼˜é›…çš„é”™è¯¯é‡è¯•å¤„ç† |
| **è¿›åº¦å±•ç¤º** | tqdm | å‹å¥½çš„è¿›åº¦æ¡æ˜¾ç¤º |
| **å‘é‡åµŒå…¥** | sentence-transformers | é«˜è´¨é‡æ–‡æœ¬å‘é‡è¡¨ç¤º |
| **çŸ¥è¯†å›¾è°±** | networkx + pyvis | è§’è‰²å…³ç³»å¯è§†åŒ– |
| **é…ç½®ç®¡ç†** | pyyaml | çµæ´»çš„é…ç½®æ–‡ä»¶ç®¡ç† |

### æ ¸å¿ƒä¾èµ–

```toml
# pyproject.toml
dependencies = [
    # æ ¸å¿ƒæ¡†æ¶
    "langchain>=1.2.3",              # LLM åº”ç”¨æ¡†æ¶
    "langchain-community>=0.4.1",    # LangChain ç¤¾åŒºç‰ˆ
    "langchain-openai>=1.1.7",      # OpenAI é›†æˆ
    "langchain-chroma>=0.1.0",       # ChromaDB é›†æˆ

    # AI æ¨¡å‹
    "openai>=2.15.0",                # OpenAI API
    "zhipuai>=2.0.0",                # æ™ºè°± AI API

    # RAG å’Œå‘é‡æ•°æ®åº“
    "chromadb>=0.6.0",               # å‘é‡æ•°æ®åº“
    "sentence-transformers>=3.0.0",  # æ–‡æœ¬åµŒå…¥
    "faiss-cpu>=1.8.0",              # å‘é‡æ£€ç´¢

    # Web å’Œå¼‚æ­¥
    "httpx>=0.28.1",                 # HTTP å®¢æˆ·ç«¯
    "aiofiles>=25.1.0",              # å¼‚æ­¥æ–‡ä»¶æ“ä½œ
    "beautifulsoup4>=4.12.0",       # HTML è§£æ
    "lxml>=4.9.0",                   # XML/HTML è§£æå™¨

    # æ•°æ®å¤„ç†
    "pandas>=2.3.3",                 # æ•°æ®å¤„ç†
    "numpy>=1.24.0",                 # æ•°å€¼è®¡ç®—
    "networkx>=3.1.0",               # çŸ¥è¯†å›¾è°±
    "pyvis>=0.3.0",                  # å›¾å½¢å¯è§†åŒ–

    # å·¥å…·åº“
    "tenacity>=9.1.2",               # é‡è¯•æœºåˆ¶
    "tqdm>=4.67.1",                  # è¿›åº¦æ¡
    "pyyaml>=6.0",                   # YAML é…ç½®æ–‡ä»¶
    "pydantic>=2.0.0",               # æ•°æ®éªŒè¯
]
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒå‡†å¤‡

```bash
# å…‹éš†é¡¹ç›®
git clone <your-repo-url>
cd sun-wukong-dataset

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv .venv
source .venv/bin/activate  # Linux/Mac
.venv\Scripts\activate     # Windows

# å®‰è£…ä¾èµ–
pip install -r requirements.txt
# æˆ–ä½¿ç”¨ uvï¼ˆæ¨èï¼‰
uv pip install -r requirements.txt
```

### é…ç½® API å¯†é’¥

åœ¨ä½¿ç”¨å‰ï¼Œè¯·ç¡®ä¿å·²é…ç½®æ™ºè°± AI API å¯†é’¥ï¼š

```bash
# åœ¨ç»ˆç«¯è®¾ç½®ç¯å¢ƒå˜é‡
export ZHIPUAI_API_KEY="your-api-key-here"

# æˆ–è€…åœ¨ä»£ç ä¸­ç›´æ¥è®¾ç½®
import os
os.environ["ZHIPUAI_API_KEY"] = "your-api-key-here"
```

### è¿è¡Œæµç¨‹

é¡¹ç›®é‡‡ç”¨æ¨¡å—åŒ–è®¾è®¡ï¼Œå¯åˆ†æ­¥è¿è¡Œï¼š

```python
# 1. é…ç½®è§’è‰²ä¿¡æ¯
# config.yaml
character:
  name: "å­™æ‚Ÿç©º"
  aliases: ["çŸ³çŒ´", "ç¾çŒ´ç‹", "çŒ´ç‹", "å¤§åœ£", "é½å¤©å¤§åœ£"]
  source: "è¥¿æ¸¸è®°"

# 2. çˆ¬å–å°è¯´å†…å®¹
from crawler import download_novel_content
await download_novel_content("config.yaml")

# 3. æå–è§’è‰²å¯¹è¯
from extraction import extract_character_dialogues
dialogues = await extract_character_dialogues("config.yaml")

# 4. ç­›é€‰é«˜è´¨é‡å¯¹è¯
from filtering import filter_character_dialogues
filtered_dialogues = await filter_character_dialogues("config.yaml")

# 5. æ„å»ºå¯¹è¯æ•°æ®é›†
from reconstruction import reconstruct_training_dataset
dataset = await reconstruct_training_dataset("config.yaml")

# 6. åˆ›å»ºRAGçŸ¥è¯†åº“
from rag import build_character_knowledge_base
kb = await build_character_knowledge_base("config.yaml")

# 7. å®Œæ•´æµæ°´çº¿ï¼ˆä¸€é”®æ‰§è¡Œï¼‰
from personaforge import run_pipeline
await run_pipeline("config.yaml")
```

---

## ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹

### é…ç½®è§’è‰²

```yaml
# config/harry_potter.yaml
character:
  name: "Harry Potter"
  aliases: ["The Boy Who Lived", "Harry"]
  source: "Harry Potter Series"
  personality_dimensions:
    - "brave"
    - "loyal"
    - "modest"
    - "determined"
  speaking_style:
    - "uses British slang"
    - "occasionally sarcastic"
    - "formal in magical contexts"
```

### æå–ä»»æ„è§’è‰²å¯¹è¯

```python
from extraction import extract_character_dialogues

# ä»ã€Šçº¢æ¥¼æ¢¦ã€‹ä¸­æå–æ—é»›ç‰å¯¹è¯
config = "config/lin_daiyu.yaml"
dialogues = await extract_character_dialogues(config)

# è¾“å‡ºæ ¼å¼ç¤ºä¾‹
print(dialogues[0])
# {
#     "character": "æ—é»›ç‰",
#     "alias": "é¢¦é¢¦",
#     "dialogue": "èŠ±è°¢èŠ±é£é£æ»¡å¤©ï¼Œçº¢æ¶ˆé¦™æ–­æœ‰è°æ€œï¼Ÿ",
#     "context": "è‘¬èŠ±åŸ",
#     "emotional_tone": "melancholic"
# }
```

### å¤šç»´åº¦æ€§æ ¼è¿‡æ»¤

```python
from filtering import filter_character_dialogues

# åŸºäºè‡ªå®šä¹‰æ€§æ ¼ç‰¹å¾è¿‡æ»¤
config = "config/shakespeare.yaml"
filtered = await filter_character_dialogues(config)

# å¯é…ç½®çš„è¿‡æ»¤ç»´åº¦ï¼š
# - æ€§æ ¼ç‰¹å¾ï¼ˆå‹‡æ•¢ã€æœºæ™ºã€å¿§éƒç­‰ï¼‰
# - è¯­è¨€æ ‡å¿—ï¼ˆç‰¹å®šè¯æ±‡ã€å¥å¼ï¼‰
# - æƒ…æ„ŸåŸºè°ƒ
# - ä¸Šä¸‹æ–‡ç›¸å…³æ€§
```

### å¯¹è¯æ•°æ®é›†æ„å»º

```python
from reconstruction import reconstruct_training_dataset

# ä¸ºå¾®è°ƒç”Ÿæˆå¯¹è¯æ•°æ®é›†
config = "config/darth_vader.yaml"
dataset = await reconstruct_training_dataset(config)

# è¾“å‡ºæ ¼å¼ï¼ˆé€‚åˆå¾®è°ƒï¼‰ï¼š
# [
#     {
#         "scene": "Luke Skywalker asks about his mother",
#         "input": "å‘Šè¯‰æˆ‘å…³äºæˆ‘æ¯äº²çš„äº‹",
#         "output": "ä½ æ¯äº²çš„äº‹è¿¹æ—©å·²æˆä¸ºä¼ è¯´...",
#         "character_style": "å¨ä¸¥ã€ç¥ç§˜ã€å¸¦æœ‰æœºæ¢°å£°"
#     }
# ]
```

### RAGçŸ¥è¯†åº“æ„å»º

```python
from rag import build_character_knowledge_base
from langchain.vectorstores import Chroma
from langchain.embeddings import HuggingFaceEmbeddings

# æ„å»ºè§’è‰²çŸ¥è¯†åº“
config = "config/motoko_kusanagi.yaml"
kb = await build_character_knowledge_base(config)

# çŸ¥è¯†åº“åŒ…å«ï¼š
# - è§’è‰²èƒŒæ™¯æ•…äº‹
# - é‡è¦äº‹ä»¶æ—¶é—´çº¿
# - æ€§æ ¼ç‰¹å¾åˆ†æ
# - äººé™…å…³ç³»ç½‘ç»œ
# - ä»·å€¼è§‚å’Œä¿¡å¿µ

# ä½¿ç”¨RAGå¢å¼ºè§’è‰²æ‰®æ¼”
def ask_character(question, kb):
    relevant_memories = kb.search_memories(question)
    context = format_memories(relevant_memories)
    response = llm.generate_with_context(
        question=question,
        character_context=context,
        styleæŒ‡å—=kb.style_guide
    )
    return response
```

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
personaforge/
â”œâ”€â”€ ğŸ“„ main.py                     # é¡¹ç›®å…¥å£å’ŒCLIå·¥å…·
â”œâ”€â”€ ğŸ“„ pyproject.toml             # é¡¹ç›®é…ç½®
â”œâ”€â”€ ğŸ“„ README.md                  # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ ğŸ“„ .gitignore                 # Git å¿½ç•¥æ–‡ä»¶
â”‚
â”œâ”€â”€ ğŸ”§ core/                      # æ ¸å¿ƒæ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ pipeline.py              # æµæ°´çº¿ç¼–æ’
â”‚   â”œâ”€â”€ config.py                # é…ç½®ç®¡ç†
â”‚   â””â”€â”€ models.py                # æ•°æ®æ¨¡å‹
â”‚
â”œâ”€â”€ ğŸ•·ï¸ crawlers/                  # çˆ¬è™«æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ base_crawler.py          # çˆ¬è™«åŸºç±»
â”‚   â”œâ”€â”€ web_novel_crawler.py     # ç½‘ç»œå°è¯´çˆ¬è™«
â”‚   â””â”€â”€ text_cleaner.py          # æ–‡æœ¬æ¸…ç†
â”‚
â”œâ”€â”€ ğŸ¤– agents/                    # AI Agentæ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ dialogue_extractor.py     # å¯¹è¯æå–Agent
â”‚   â”œâ”€â”€ character_filter.py      # è§’è‰²ç­›é€‰Agent
â”‚   â”œâ”€â”€ dialogue_reconstructor.py # å¯¹è¯é‡æ„Agent
â”‚   â””â”€â”€ rag_builder.py           # RAGçŸ¥è¯†åº“æ„å»ºAgent
â”‚
â”œâ”€â”€ ğŸ§  rag/                       # RAGæ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ knowledge_base.py        # çŸ¥è¯†åº“æ ¸å¿ƒ
â”‚   â”œâ”€â”€ vector_store.py          # å‘é‡å­˜å‚¨
â”‚   â””â”€â”€ memory_manager.py        # è®°å¿†ç®¡ç†
â”‚
â”œâ”€â”€ ğŸ“Š datasets/                  # æ•°æ®é›†æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ dialogue_dataset.py       # å¯¹è¯æ•°æ®é›†
â”‚   â”œâ”€â”€ formatter.py              # æ•°æ®æ ¼å¼åŒ–
â”‚   â””â”€â”€ validator.py             # æ•°æ®éªŒè¯
â”‚
â”œâ”€â”€ âš™ï¸ configs/                   # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ default.yaml             # é»˜è®¤é…ç½®
â”‚   â”œâ”€â”€ characters/              # è§’è‰²é…ç½®
â”‚   â”‚   â”œâ”€â”€ sun_wukong.yaml
â”‚   â”‚   â”œâ”€â”€ harry_potter.yaml
â”‚   â”‚   â””â”€â”€ lin_daiyu.yaml
â”‚   â””â”€â”€ sources/                 # æ•°æ®æºé…ç½®
â”‚       â”œâ”€â”€ xiyouji.yaml
â”‚       â””â”€â”€ hongloumeng.yaml
â”‚
â””â”€â”€ ğŸ“š examples/                  # ç¤ºä¾‹ä»£ç 
    â”œâ”€â”€ basic_usage.py           # åŸºç¡€ä½¿ç”¨
    â”œâ”€â”€ custom_character.py       # è‡ªå®šä¹‰è§’è‰²
    â””â”€â”€ pipeline_demo.py         # æµæ°´çº¿æ¼”ç¤º
```

### æ¨¡å—è¯´æ˜

| æ¨¡å— | åŠŸèƒ½ | ç‰¹ç‚¹ |
|------|------|------|
| **pipeline.py** | æµæ°´çº¿ç¼–æ’ | åè°ƒå„ä¸ªAgentçš„å·¥ä½œæµç¨‹ |
| **crawlers/** | å¤šæºçˆ¬è™« | æ”¯æŒå„ç§å°è¯´ç½‘ç«™å’Œæ–‡æœ¬æº |
| **agents/** | æ™ºèƒ½Agent | ä¸“é—¨å¤„ç†è§’è‰²ç›¸å…³ä»»åŠ¡çš„AIç³»ç»Ÿ |
| **rag/** | è®°å¿†ç³»ç»Ÿ | æ„å»ºå’Œç»´æŠ¤è§’è‰²é•¿æœŸè®°å¿† |
| **datasets/** | æ•°æ®å¤„ç† | ç”Ÿæˆé«˜è´¨é‡çš„è®­ç»ƒæ•°æ® |
| **configs/** | çµæ´»é…ç½® | æ˜“äºæ‰©å±•æ–°è§’è‰²å’Œæ•°æ®æº |

---

## ğŸš€ é«˜çº§ç‰¹æ€§

### å¤šè§’è‰²å¹¶è¡Œå¤„ç†
```python
# åŒæ—¶å¤„ç†å¤šä¸ªè§’è‰²
from personaforge import run_multiple_pipelines

character_configs = [
    "configs/characters/sun_wukong.yaml",
    "configs/characters/zhu_bajie.yaml",
    "configs/characters/tangseng.yaml"
]

await run_multiple_pipelines(character_configs)
```

### è‡ªå®šä¹‰Agentæ¨¡æ¿
```python
# åˆ›å»ºè‡ªå®šä¹‰Agent
from agents.base_agent import BaseAgent

class CustomFilterAgent(BaseAgent):
    async def process(self, dialogues):
        # å®ç°è‡ªå®šä¹‰è¿‡æ»¤é€»è¾‘
        return filtered_dialogues

# æ³¨å†Œåˆ°æµæ°´çº¿
pipeline.register_agent("custom_filter", CustomFilterAgent)
```

### çŸ¥è¯†å›¾è°±å¯è§†åŒ–
```python
# å¯¼å‡ºè§’è‰²å…³ç³»å›¾
from rag import export_character_graph

graph = export_character_graph("configs/characters/journey_west.yaml")
graph.render("journey_west_relationship.html")
```

### æ¨¡å‹å¾®è°ƒé›†æˆ
```python
# ç”Ÿæˆé€‚é…LoRAå¾®è°ƒçš„æ•°æ®æ ¼å¼
from datasets import format_for_lora

# JSONæ ¼å¼é€‚åˆLoRAå¾®è°ƒ
lora_dataset = format_for_lora(
    dataset,
    model_type="llama",
    max_length=1024
)
lora_dataset.save("sun_wukong_lora.json")
```

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿å„ç§å½¢å¼çš„è´¡çŒ®ï¼

### å¦‚ä½•è´¡çŒ®

1. **Fork é¡¹ç›®**
2. **åˆ›å»ºç‰¹æ€§åˆ†æ”¯** (`git checkout -b feature/AmazingFeature`)
3. **æäº¤æ›´æ”¹** (`git commit -m 'Add some AmazingFeature'`)
4. **æ¨é€åˆ†æ”¯** (`git push origin feature/AmazingFeature`)
5. **åˆ›å»º Pull Request**

### å¼€å‘æŒ‡å—

- éµå¾ª PEP 8 ç¼–ç è§„èŒƒ
- ä½¿ç”¨å¼‚æ­¥ç¼–ç¨‹æ¨¡å¼æé«˜æ€§èƒ½
- æ·»åŠ é€‚å½“çš„ç±»å‹æ³¨è§£
- ç¼–å†™æ¸…æ™°çš„æ–‡æ¡£å­—ç¬¦ä¸²
- ä¸ºæ‰€æœ‰æ–°åŠŸèƒ½æ·»åŠ æµ‹è¯•ç”¨ä¾‹

### æ·»åŠ æ–°è§’è‰²

1. åœ¨ `configs/characters/` ä¸‹åˆ›å»ºè§’è‰²é…ç½®æ–‡ä»¶
2. æµ‹è¯•å¯¹è¯æå–è´¨é‡
3. è°ƒæ•´æ€§æ ¼ç»´åº¦å‚æ•°
4. åˆ†äº«æ‚¨çš„é…ç½®å¹¶è´¡çŒ®ç»™ç¤¾åŒºï¼

### æ·»åŠ æ–°æ•°æ®æº

1. åœ¨ `crawlers/` ä¸‹å®ç°æ–°çš„çˆ¬è™«ç±»
2. ç»§æ‰¿ `BaseCrawler` å¹¶å®ç°å¿…è¦æ–¹æ³•
3. åœ¨é…ç½®æ–‡ä»¶ä¸­æ³¨å†Œæ–°æ•°æ®æº
4. æ·»åŠ ç›¸åº”çš„æµ‹è¯•ç”¨ä¾‹

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

---

## ğŸ™ è‡´è°¢

- [æ™ºè°± AI](https://open.bigmodel.cn/) - æä¾›å¼ºå¤§çš„ GLM æ¨¡å‹æ”¯æŒ
- [LangChain](https://github.com/langchain-ai/langchain) - ä¼˜ç§€çš„ LLM åº”ç”¨å¼€å‘æ¡†æ¶
- [ChromaDB](https://www.trychroma.com/) - å¼€æºå‘é‡æ•°æ®åº“
- sentence-transformers - é«˜è´¨é‡çš„æ–‡æœ¬åµŒå…¥æ¨¡å‹
- æ‰€æœ‰åˆ›é€ äº†ä¸æœ½ç»å…¸å½¢è±¡çš„ä½œè€…ä»¬

---

## ğŸ“– æ›´å¤šèµ„æº

- [æ–‡æ¡£](https://personaforge.readthedocs.io/) - å®Œæ•´æ–‡æ¡£
- [ç¤ºä¾‹é…ç½®](configs/) - å„ç§è§’è‰²é…ç½®ç¤ºä¾‹
- [æ›´æ–°æ—¥å¿—](CHANGELOG.md) - ç‰ˆæœ¬æ›´æ–°è®°å½•
- [å¸¸è§é—®é¢˜](FAQ.md) - å¸¸è§é—®é¢˜è§£ç­”

---

<div align="center">

**â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·è€ƒè™‘ç»™ä¸ª starï¼**

[ğŸ› æŠ¥å‘Šé—®é¢˜](https://github.com/your-username/personaforge/issues) â€¢ [ğŸ’¡ æå‡ºå»ºè®®](https://github.com/your-username/personaforge/discussions)

[å›åˆ°é¡¶éƒ¨](#-personaforge)

</div>